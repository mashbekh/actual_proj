<!DOCTYPE HTML >
<!-- The HTML 4.01 Transitional DOCTYPE declaration-->
<!-- above set at the top of the file will set     -->
<!-- the browser's rendering engine into           -->
<!-- "Quirks Mode". Replacing this declaration     -->
<!-- with a "Standards Mode" doctype is supported, -->
<!-- but may lead to some differences in layout.   -->

<html lang="en">

<head>

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="author" content="">

<title>Tax System</title>


<script type="text/javascript"
	src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

<script src="jarvis/js/bootstrap.min.js"></script>

<script
	src="http://ajax.aspnetcdn.com/ajax/jquery.ui/1.9.1/jquery-ui.js"
	type="text/javascript"></script>
<link
	href="http://ajax.aspnetcdn.com/ajax/jquery.ui/1.9.1/themes/blitzer/jquery-ui.css"
	rel="stylesheet" type="text/css" />
<link rel="stylesheet" href="jarvis/css/jquery.flexdatalist.min.css">




<link rel="stylesheet"
	href="jarvis/js/datatables/responsive/css/datatables.responsive.css">

<!-- Bootstrap Core CSS -->
<link href="jarvis/css1/bootstrap.min.css" rel="stylesheet">
<!-- Custom CSS -->
<link href="jarvis/css1/sb-admin.css" rel="stylesheet">



<!-- Custom Fonts -->
<link href="jarvis/css/font-icons/font-awesome/css/font-awesome.min.css"
	rel="stylesheet" type="text/css">

<link rel="stylesheet"
	href="jarvis/css/font-icons/entypo/css/entypo.css">



<script src="jarvis/js/jquery.dataTables.min.js"></script>
<script src="jarvis/js/datatables/TableTools.min.js"></script>
<script src="jarvis/js/dataTables.bootstrap.js"></script>
<script src="jarvis/js/datatables/jquery.dataTables.columnFilter.js"></script>
<script src="jarvis/js/datatables/lodash.min.js"></script>
<script
	src="jarvis/js/datatables/responsive/js/datatables.responsive.js"></script>
<link rel="stylesheet"
	href="jarvis/js/datatables/responsive/css/datatables.responsive.css">



<script src="jarvis/js/bootstrap.js"></script>

<script src="jarvis/js/select2/select2.min.js"></script>
<script src="jarvis/js/selectboxit/jquery.selectBoxIt.min.js"></script>
<link rel="stylesheet" href="jarvis/js/select2/select2-bootstrap.css">
<link rel="stylesheet" href="jarvis/js/select2/select2.css">
<link rel="stylesheet"
	href="jarvis/js/selectboxit/jquery.selectBoxIt.css">


</head>


<style>
.dataTables_filter {
	width: 50%;
	float: right;
	top-margin: 100px;
	text-align: right;
}

.form-group.required .control-label:after {
	content: "*";
	color: red;
}

#abc {
	background-color: #F0F3F4;
	margin-top: 15px;
}

#xyz {
	height: 65px;
	text-align: center;
	background-color: #152F37;
}

#pqr {
	background-color: #152F37;
}

.ui-dialog-titlebar {
	border: 0;
	padding: .5em 1em;
	background: #009999;
	overflow: auto;
	zoom: 1;
}

.ui-dialog-titlebar-close {
	display: none;
}
</style>

<script>

var tax_list = [
	{
		"tax_id" : "CMP123TAX1",
		"tax_abbreviation" : "VAT",
		"tax_rate": 5.5
		
	},
	{
		"tax_id" : "CMP123TAX2",
		"tax_abbreviation" : "VAT",
		"tax_rate": 14.5
		
		
	}
];
var prod_json=null; //original
var prodnew_json = null; //edited
var edit_counter=null; //when edit gets submitted, has product_id of to be editted product (when edit box opened set this)

function loadName()
{
	 $('.dropdown-toggle').dropdown();
	
   document.getElementById("name").innerHTML =   window.localStorage.getItem("user_name");
   var company_id="CMP445";
   
   //ajax call to fetch taxes
   
    for(var i=0;i<tax_list.length;i++)
	 {
	 
	 	$('#taxlist').append("<option taxid='" +  tax_list[i].tax_id   + "' value='" + tax_list[i].tax_abbreviation + " "  +  tax_list[i].tax_rate + "'>" + "</option>");
	 
	 	
	 
	 }
     
   
   //ajax call to fetch all products
    
    /*
	$.ajax({
		   		type : 'GET',
		   		url  : '/Accounting/products/create',
		    	dataType :'text',
		    	data:{'company_id' : company_id},
		    	success: function(response)
		    	{
		     		alert(response);
		     		prod_json = response;
		      		prodnew_json=response;
		      		update();
		   
		        },
				error: function (a,b,c)
				{ 
					alert(a.status+b+c);
				 	console.log(a.status+b+c);
				}  
		  });
   */
  
}


    $(document).ready(function () {
        $('.dropdown-toggle').dropdown();
    });
</script>

<body onload="loadName()">



	<div id="wrapper">

		<!-- Navigation -->
		<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation"
			id="pqr">
			<!-- Brand and toggle get grouped for better mobile display -->
			<div class="navbar-header" id="xyz">
				<button type="button" class="navbar-toggle" data-toggle="collapse"
					data-target=".navbar-ex1-collapse">
					<span class="sr-only">Toggle navigation</span> <span
						class="icon-bar"></span> <span class="icon-bar"></span> <span
						class="icon-bar"></span>
				</button>

				<a class="navbar-brand" href="index.html" id="xyz">SIMPLIFY TAX</a>
			</div>
			<!-- Top Menu Items -->
			<ul class="nav navbar-right top-nav" id="pqr">
				<li class="dropdown">

					<ul class="dropdown-menu message-dropdown">
						<li class="message-preview"><a href="#">
								<div class="media">
									<span class="pull-left"> <img class="media-object"
										src="http://placehold.it/50x50" alt="">
									</span>
									<div class="media-body">
										<h5 class="media-heading">
											<strong>John Smith</strong>
										</h5>
										<p class="small text-muted">
											<i class="fa fa-clock-o"></i> Yesterday at 4:32 PM
										</p>
										<p>Lorem ipsum dolor sit amet, consectetur...</p>
									</div>
								</div>
						</a></li>
						<li class="message-preview"><a href="#">
								<div class="media">
									<span class="pull-left"> <img class="media-object"
										src="http://placehold.it/50x50" alt="">
									</span>
									<div class="media-body">
										<h5 class="media-heading">
											<strong>John Smith</strong>
										</h5>
										<p class="small text-muted">
											<i class="fa fa-clock-o"></i> Yesterday at 4:32 PM
										</p>
										<p>Lorem ipsum dolor sit amet, consectetur...</p>
									</div>
								</div>
						</a></li>
						<li class="message-preview"><a href="#">
								<div class="media">
									<span class="pull-left"> <img class="media-object"
										src="http://placehold.it/50x50" alt="">
									</span>
									<div class="media-body">
										<h5 class="media-heading">
											<strong>John Smith</strong>
										</h5>
										<p class="small text-muted">
											<i class="fa fa-clock-o"></i> Yesterday at 4:32 PM
										</p>
										<p>Lorem ipsum dolor sit amet, consectetur...</p>
									</div>
								</div>
						</a></li>
						<li class="message-footer"><a href="#">Read All New
								Messages</a></li>
					</ul>
				</li>
				<li class="dropdown"><a href="#" class="dropdown-toggle"
					data-toggle="dropdown"><i class="fa fa-bell"></i> <b
						class="caret"></b></a>
					<ul class="dropdown-menu alert-dropdown">
						<li><a href="#">Alert Name <span
								class="label label-default">Alert Badge</span></a></li>
						<li><a href="#">Alert Name <span
								class="label label-primary">Alert Badge</span></a></li>
						<li><a href="#">Alert Name <span
								class="label label-success">Alert Badge</span></a></li>
						<li><a href="#">Alert Name <span class="label label-info">Alert
									Badge</span></a></li>
						<li><a href="#">Alert Name <span
								class="label label-warning">Alert Badge</span></a></li>
						<li><a href="#">Alert Name <span
								class="label label-danger">Alert Badge</span></a></li>
						<li class="divider"></li>
						<li><a href="#">View All</a></li>
					</ul></li>


				<li class="dropdown"><a class="dropdown-toggle"
					data-toggle="dropdown" style="color: white"><i
						class="fa fa-fw fa-gear"></i>Settings</a>
					<ul class="dropdown-menu">

						<li><a href="business_details.html">Company Profile</a></li>
						<li class="divider"></li>
						<li><a href="tax_settings.html"> Tax Settings</a></li>
						<li class="divider"></li>
						<li><a href="financial_settings.html">Financial Settings
						</a></li>
						<li class="divider"></li>
						<li><a href="products.html">Products </a></li>
						<li class="divider"></li>
						<li><a href="FormatSettings.html">Format Settings </a></li>
					</ul></li>


				<li class="dropdown"><a href="#" class="dropdown-toggle"
					data-toggle="dropdown" style="color: white">&nbsp;<i
						class="fa fa-user" id="name"></i> <b class="caret"></b></a>
					<ul class="dropdown-menu">

						<li class="divider"></li>
						<li><a href="logout.html"><i
								class="fa fa-fw fa-power-off"></i> Log Out</a></li>
					</ul></li>
			</ul>

			<!-- Sidebar Menu Items - These collapse to the responsive navigation menu on small screens -->
			<div class="collapse navbar-collapse navbar-ex1-collapse">
				<ul class="nav navbar-nav side-nav" id="abc">

					<li><a href="index.html"><i class="fa fa-fw fa-dashboard"></i>
							Home</a></li>

					<li class="active"><a href="PurchaseOrders.html"><i
							class="fa fa-fw fa-dashboard"></i> Purchase Orders</a></li>

					<li><a href="createBill.html"><i
							class="fa fa-fw fa-dashboard"></i> Bills</a></li>

					<li><a href="Estimates.html"><i
							class="fa fa-fw fa-dashboard"></i> Estimate</a></li>

					<li><a href="invoice.html"><i
							class="fa fa-fw fa-dashboard"></i> Invoice</a></li>

					<li><a href="Receipts.html"><i
							class="fa fa-fw fa-dashboard"></i> Receipts</a></li>

					<li><a href="Reports.html"><i
							class="fa fa-fw fa-dashboard"></i> Reports</a></li>

					<li><a href="createCustomer.html"><i
							class="fa fa-fw fa-dashboard"></i> Customers</a></li>

					<li><a href="createVendor.html"><i
							class="fa fa-fw fa-dashboard"></i> Vendors</a></li>

				</ul>
			</div>
			<!-- /.navbar-collapse -->
		</nav>





		<div id="page-wrapper">

			<div class="container-fluid">



				<h1 class="page-header">PRODUCTS</h1>


				<!------CONTROL TABS START------>
				<ul class="nav nav-tabs bordered">

					<li class="active"><a href="#view_products" data-toggle="tab"><i
							class="entypo-menu"></i> View Products</a></li>

					<li><a href="#add_product" data-toggle="tab"><i
							class="entypo-menu"></i> Add Product</a></li>




				</ul>
				<!------CONTROL TABS END------>


				<div class="tab-content">



					<div class="tab-pane box" id="add_product">

						<!-- another nav tab content -->

						<br> 



								<div id="form-panel">
									<div class="row">
										<div class="col-lg-8">

											<br>
										
											<form role="form">


												<div class="form-group required">
													<label class="col-md-3 control-label">Product Name</label>
													<div class="col-md-6">
														<input class="form-control" id="product_name"
															name="product_name" maxlength="30"
															placeholder="Product Name" required="required" title=""
															type="text" />
													</div>
												</div>

												<br> <br> <br>

												<div class="form-group ">
													<label class="col-md-3 control-label">Product
														Description</label>
													<div class="col-md-6">
														<input class="form-control" id="product_desc"
															name="product_desc" maxlength="" title="" type="text" />
													</div>
												</div>

												<br> <br>

												

												<div class="form-group ">
													<label class="col-md-3 control-label">Category</label>
													<div class="col-md-6">
														<input class="form-control" id="category"
															name="category" maxlength="" title="" type="text" />
													</div>
												</div>

												<br> <br>

												<div class="form-group ">
													<label class="col-md-3 control-label">Cost Price</label>
													<div class="col-md-6">
														<input class="form-control" id="cp" name="cp"
															maxlength="" title="" type="text" />
													</div>
												</div>

												<br>
												<br>



												<div class="form-group required">
													<label class="col-md-3 control-label">Head of
														Expenditure</label>
													<div class="col-md-6">
														<select name="expenditure"
															class="form-control selectboxit" id="expenditure">
															<option value="None">Select</option>

															<option value="purchase">Purchases</option>

														</select>
													</div>
												</div>

												<br> <br>

												<div class="form-group ">
													<label class="col-md-3 control-label">Selling Price</label>
													<div class="col-md-6">
														<input class="form-control" id="sp" name="sp"
															maxlength="" title="" type="text" />
													</div>
												</div>

												<br>
												<br>


												<div class="form-group required">
													<label class="col-md-3 control-label">Head of
														Income</label>
													<div class="col-md-6">
														<select name="income" class="form-control selectboxit"
															id="income">
															<option value="None">Select</option>

															<option value="Sales">Sales</option>

														</select>
													</div>
												</div>

												<br> <br>
												
												<div class="form-group">
													<label class="col-md-3 control-label">Discount</label>
													<div class="col-md-6">
														<input class="form-control" id="discount" name="discount"
															maxlength="" title="" type="text" />
													</div>
												</div>
												
												<br><br>

												

												<div class="form-group required">
											<label class="col-md-3 control-label">Tax Rate</label>
											<div class="col-md-6">

												<input list="taxlist" class="form-control"
													id="tax_rate" placeholder="Tax Rate">

												<datalist id="taxlist">


												</datalist>
											</div>
										</div>

												<br> <br>


											</form>
											<input type="submit" class="btn btn-primary"
												 onclick="return add_product()">


<br> <br>
										</div>
									</div>
								</div>
							</div>
							
							<!-- close desc of create prod -->



					<!-- NEW NAV BAR CONTENT -->
					<!--  ASSOCIATION ACTION BUTTON WITH ID SUCH THAT FOR EVERY ROW IT HOLDS TAX_ID, PASS THIS
                        TO DELETE AND EDIT FUNCTION, SO INTERNAL TAX_ID IS KNOWN -->

					<div class="tab-pane box active " id="view_products">
						<div class="row">
							<div class="col-lg-12">
								<br> <br>
								<table class="table table-bordered datatable" id="table_export">
									<thead>
										<tr>

											<th><div>Product Type</div></th>


											<th><div>Product Name</div></th>

											<th><div>Product Description</div></th>

											<th><div>Tax Rate</div></th>

											<th><div>Options</div></th>

										</tr>
									</thead>
									<tbody>
										<tr>
											<td>
												<!--  ADD CODE TO POPULATE VALUES FROM JSON FOR EACH TD -->

											</td>

											<td></td>

											<td></td>
											<td></td>




											<td>
												<!-- ACTIONS -->
												<div class="btn-group">

													<button type="button"
														class="btn btn-default btn-sm dropdown-toggle"
														data-toggle="dropdown">
														Action <span class="caret"></span>
													</button>
													<ul class="dropdown-menu dropdown-default pull-right"
														role="menu">

														<!-- view -->
														<li><a href="" onClick="return view_product()"> <!-- OPEN POP UP WITH FILLED VALUES, pass  table product_id -->
																<i class="entypo-pencil"></i> View Product
														</a></li>
														<li class="divider"></li>


														<!-- EDITING LINK -->
														<li><a href="" onClick="return edit_product()"> <!-- OPEN POP UP WITH FILLED VALUES, pass  table product_id -->
																<i class="entypo-pencil"></i> Edit Product
														</a></li>
														<li class="divider"></li>

														<!-- DELETION LINK -->
														<!-- DELETE FROM DATABASE -->
														<li><a href=""
															onClick="return confirm('Are you sure to delete?')">
																<!--  pass product id along --> <i class="entypo-trash"></i>
																Delete Product
														</a></li>
													</ul>
												</div>

											</td>

										</tr>

									</tbody>
								</table>
							</div>
						</div>


					</div>




				</div>
				<!-- end of nav bar content -->


				<!--   </div>
                </div> -->
				<!-- /.row -->
			</div>
			<!--  wrapper -->



		</div>
		<!-- /.container-fluid -->

	</div>
	<!-- /#page-wrapper -->

	</div>
	<!-- /#wrapper -->







</body>




<!-----  DATA TABLE EXPORT CONFIGURATIONS ---->
<script type="text/javascript">

	jQuery(document).ready(function($)
	{
		

		$('.nav-tabs a[data-toggle="tab"]').on('shown.bs.tab', function(e) {
	
	var jqTable = $('table.datatable', $(e.target).attr("href"));
	    if ( jqTable.length > 0 ) {
	    var oTableTools = TableTools.fnGetInstance( jqTable[0] );
	    if ( oTableTools != null && oTableTools.fnResizeRequired() ){
	        jqTable.dataTable().fnAdjustColumnSizing();
	        oTableTools.fnResizeButtons();
	    }
	}	
	
	return false;
});


		var datatable = $("#table_export").dataTable({
			"sPaginationType": "bootstrap",
			"sDom": "<'row'<'col-xs-3 col-left'l><'col-xs-9 col-right'<'export-data'T>f>r>t<'row'<'col-xs-3 col-left'i><'col-xs-9 col-right'p>>",
			
			"oTableTools": {
			    
			   
			
				"aButtons": [
					
					{
						"sExtends": "xls",
						
						
					},
					{
						"sExtends": "pdf",
						
					},
					{
						"sExtends": "print",
						"fnSetText"	   : "Press 'esc' to return",
						"fnClick": function (nButton, oConfig) {
							datatable.fnSetColumnVis(0, false);
							datatable.fnSetColumnVis(3, false);
							
							this.fnPrint( true, oConfig );
							
							window.print();
							
							$(window).keyup(function(e) {
								  if (e.which == 27) {
									  datatable.fnSetColumnVis(0, true);
									  datatable.fnSetColumnVis(3, true);
								  }
							});
						},
						
					},
				]
			},
			
		});
		
		$(".dataTables_wrapper select").select2({
			minimumResultsForSearch: -1
		});
	});
	
	//tax rate not compulsion
	
	
	function add_product()
	{
		
		var name = $("#product_name").val();
		var tax = $("#tax_rate").val();
		var tid = $('datalist option[value="'+ tax +'"]').attr('taxid');
		var desc  = $("#product_desc").val();
		
		var category  = $("#category").val();
		var expen  = $("#expenditure").val(); //let value be ID
		var income  = $("#income").val();
		
		var cp = $("#cp").val();
		var sp = $("#sp").val();
		
		if(cp=='')
			cp=0;
		if(sp=='')
			sp=0;
		
		var discount = $("#discount").val();
		
		if(discount=='')
		  discount=0;
		
		
		if(tax=='')
			tid = null;
		
		if(name=='' )   
			{
			alert("Fill in all required fields");
			return true;
			
			}
		
		var product = {      
				
				
				
				"product_name":name,
				"product_desc": desc,
				"tax":                             //backend - search for tax obect from table with this id
					{
					 "tax_name":null,
					 "tax_abbreviation":null,
					 "tax_desc":null,
					 "tax_rate":null,
					 "company": null,//company object
					 "tax_id": tid,
					 "tax_recoverable":true
					 
					},
				"category":category,
				"cp": cp,
				"head_expenditure": expen,
					
				"sp": sp,
				"head_income": income,
				"discount" : discount,
				
				"company":
					{
					"company_id" :"CMP445"
					},
					
				"product_id":null,
				"id":null
				
				
		};
		alert(product);
		console.log(product);
		
		//make ajax call to create product, on success clear all fields
		
		
		
		
		alert("product created");
		
		
			$("#product_name").val('');
			$("#tax_rate").val('');
			$("#product_desc").val('');
			$("#category").val('');
			$("#expenditure").val(''); //let value be ID
			$("#income").val('');
			$("#cp").val('');
			$("#sp").val('');
			$("#discount").val('');
		
		return true;
	}
	
	
	
	
	
		
</script>



</html>
