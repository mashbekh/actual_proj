<!DOCTYPE HTML >
<!-- The HTML 4.01 Transitional DOCTYPE declaration-->
<!-- above set at the top of the file will set     -->
<!-- the browser's rendering engine into           -->
<!-- "Quirks Mode". Replacing this declaration     -->
<!-- with a "Standards Mode" doctype is supported, -->
<!-- but may lead to some differences in layout.   -->

<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Tax System</title>
  
   
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

  <script src="jarvis/js/bootstrap.min.js"></script>

<script src="http://ajax.aspnetcdn.com/ajax/jquery.ui/1.9.1/jquery-ui.js" type="text/javascript"></script>
<link href="http://ajax.aspnetcdn.com/ajax/jquery.ui/1.9.1/themes/blitzer/jquery-ui.css"
    rel="stylesheet" type="text/css" />
<link rel="stylesheet" href="jarvis/css/jquery.flexdatalist.min.css">
   
 
  
    
 <link rel="stylesheet"
	href="jarvis/js/datatables/responsive/css/datatables.responsive.css">

<!-- Bootstrap Core CSS -->
<link href="jarvis/css1/bootstrap.min.css" rel="stylesheet">
<!-- Custom CSS -->
<link href="jarvis/css1/sb-admin.css" rel="stylesheet">



<!-- Custom Fonts -->
<link href="jarvis/css/font-icons/font-awesome/css/font-awesome.min.css"
	rel="stylesheet" type="text/css">

<link rel="stylesheet"
	href="jarvis/css/font-icons/entypo/css/entypo.css">



    <script src="jarvis/js/jquery.dataTables.min.js"></script>
	<script src="jarvis/js/datatables/TableTools.min.js"></script>
	<script src="jarvis/js/dataTables.bootstrap.js"></script>
	<script src="jarvis/js/datatables/jquery.dataTables.columnFilter.js"></script>
	<script src="jarvis/js/datatables/lodash.min.js"></script>
	<script src="jarvis/js/datatables/responsive/js/datatables.responsive.js"></script>
	 <link rel="stylesheet" href="jarvis/js/datatables/responsive/css/datatables.responsive.css">
	 
	
	  
	   <script src="jarvis/js/bootstrap.js"></script>
	   
	   <script src="jarvis/js/select2/select2.min.js"></script>
    <script src="jarvis/js/selectboxit/jquery.selectBoxIt.min.js"></script>
    <link rel="stylesheet" href="jarvis/js/select2/select2-bootstrap.css">
	<link rel="stylesheet" href="jarvis/js/select2/select2.css">
	<link rel="stylesheet" href="jarvis/js/selectboxit/jquery.selectBoxIt.css">


</head>

<script>

 function edit_tax()
 {
	 
	 $("#edittax_dialog").dialog({
         
         modal: true,
         autoOpen: false,
         title: "Edit Tax",
         width: 700,
         height: 500
     });
       
         $('#edittax_dialog').dialog('open');
         
         //populate with values from that type of tax
         return false;
	 
	 
 }
 
 
 function submit_edit_tax() //receive TAX ID, to know which tax to delete
 {
	 var tax_name = $('#new_tax_name').val();
	 var tax_abbr = $('#new_abbreviation').val();
	 var tax_rate = $('#new_tax_rate').val();
	 var tax_desc = $('#new_desc').val();
	 var tax_regno = $('#new_tax_reg_no').val();
	 //var tax_recovery  = $('#tax_recovery').prop("checked");

	 if(tax_name==''||tax_abbr==''||tax_rate==''||tax_desc==''||tax_regno=='')
	 {
	 return true;
	 }

	 //alert("all fine");
	 //
	 $('#edittax_dialog').dialog('close');
	 return false;
	 // make an ajax call to edit type of tax
 }

 function cancel()
 {
	 $('#edittax_dialog').dialog('close');
	 //return false;
 }




</script>


<style>

.dataTables_filter {
   width: 50%;
   float: right;
   top-margin:100px;
   text-align: right;
}

.form-group.required .control-label:after {
  content:"*";
  color:red;
}

#abc{
  background-color: #F0F3F4;
   margin-top: 15px;
   
}


#xyz
{
    height: 65px;
     text-align: center;
    
     background-color:#152F37;
}

#pqr{
     background-color:#152F37;

}

.ui-dialog-titlebar {
    border: 0;
    padding: .5em 1em;
    background: #009999;
    overflow: auto;
    zoom: 1;
}

.ui-dialog-titlebar-close {
	display: none;
}
</style>

<script>
function loadName()
{
   document.getElementById("name").innerHTML =   window.localStorage.getItem("user_name");
   $('.dropdown-toggle').dropdown();

}



</script>

<script>
    $(document).ready(function () {
        $('.dropdown-toggle').dropdown();
    });
</script>

<body onload="loadName()">

 
    <div id="wrapper">

        <!-- Navigation -->
        <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation" id="pqr">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header" id="xyz">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                
                <a class="navbar-brand" href="index.html" id="xyz" >SIMPLIFY TAX</a>
            </div>
            <!-- Top Menu Items -->
            <ul class="nav navbar-right top-nav" id="pqr">
                <li class="dropdown">
                   
                    <ul class="dropdown-menu message-dropdown">
                        <li class="message-preview">
                            <a href="#">
                                <div class="media">
                                    <span class="pull-left">
                                        <img class="media-object" src="http://placehold.it/50x50" alt="">
                                    </span>
                                    <div class="media-body">
                                        <h5 class="media-heading"><strong>John Smith</strong>
                                        </h5>
                                        <p class="small text-muted"><i class="fa fa-clock-o"></i> Yesterday at 4:32 PM</p>
                                        <p>Lorem ipsum dolor sit amet, consectetur...</p>
                                    </div>
                                </div>
                            </a>
                        </li>
                        <li class="message-preview">
                            <a href="#">
                                <div class="media">
                                    <span class="pull-left">
                                        <img class="media-object" src="http://placehold.it/50x50" alt="">
                                    </span>
                                    <div class="media-body">
                                        <h5 class="media-heading"><strong>John Smith</strong>
                                        </h5>
                                        <p class="small text-muted"><i class="fa fa-clock-o"></i> Yesterday at 4:32 PM</p>
                                        <p>Lorem ipsum dolor sit amet, consectetur...</p>
                                    </div>
                                </div>
                            </a>
                        </li>
                        <li class="message-preview">
                            <a href="#">
                                <div class="media">
                                    <span class="pull-left">
                                        <img class="media-object" src="http://placehold.it/50x50" alt="">
                                    </span>
                                    <div class="media-body">
                                        <h5 class="media-heading"><strong>John Smith</strong>
                                        </h5>
                                        <p class="small text-muted"><i class="fa fa-clock-o"></i> Yesterday at 4:32 PM</p>
                                        <p>Lorem ipsum dolor sit amet, consectetur...</p>
                                    </div>
                                </div>
                            </a>
                        </li>
                        <li class="message-footer">
                            <a href="#">Read All New Messages</a>
                        </li>
                    </ul>
                </li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-bell"></i> <b class="caret"></b></a>
                    <ul class="dropdown-menu alert-dropdown">
                        <li>
                            <a href="#">Alert Name <span class="label label-default">Alert Badge</span></a>
                        </li>
                        <li>
                            <a href="#">Alert Name <span class="label label-primary">Alert Badge</span></a>
                        </li>
                        <li>
                            <a href="#">Alert Name <span class="label label-success">Alert Badge</span></a>
                        </li>
                        <li>
                            <a href="#">Alert Name <span class="label label-info">Alert Badge</span></a>
                        </li>
                        <li>
                            <a href="#">Alert Name <span class="label label-warning">Alert Badge</span></a>
                        </li>
                        <li>
                            <a href="#">Alert Name <span class="label label-danger">Alert Badge</span></a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a href="#">View All</a>
                        </li>
                    </ul>
                </li>
                
                	
				<li class="dropdown"><a class="dropdown-toggle"
					data-toggle="dropdown" style="color:white"><i class="fa fa-fw fa-gear"></i>Settings</a>
					<ul class="dropdown-menu">
					   
						<li><a href="business_details.html">Company Profile</a></li>
						 <li class="divider"></li>
						<li><a href="tax_settings.html" > Tax Settings</a></li>
						<li class="divider"></li>
						<li><a href="financial_settings.html">Financial Settings </a></li>
						<li class="divider"></li>
						<li><a href="products.html">Products </a></li>
						<li class="divider"></li>
						<li><a href="FormatSettings.html">Format Settings </a></li>
					</ul>
				</li>


				<li class="dropdown"><a href="#" class="dropdown-toggle"
					data-toggle="dropdown" style="color:white">&nbsp;<i class="fa fa-user" id="name"></i>
						<b class="caret"></b></a>
					<ul class="dropdown-menu">
						
						<li class="divider"></li>
						<li><a href="logout.html"><i
								class="fa fa-fw fa-power-off"></i> Log Out</a></li>
					</ul></li>
			</ul>

			<!-- Sidebar Menu Items - These collapse to the responsive navigation menu on small screens -->
			<div class="collapse navbar-collapse navbar-ex1-collapse">
				<ul class="nav navbar-nav side-nav" id="abc">

					<li ><a href="index.html"><i
							class="fa fa-fw fa-dashboard"></i> Home</a></li>
							
					<li class="active"><a href="PurchaseOrders.html"><i class="fa fa-fw fa-dashboard"></i>
							Purchase Orders</a></li>
							
					<li><a href="createBill.html"><i class="fa fa-fw fa-dashboard"></i>
							Bills</a></li>
							
					<li><a href="createEstimate.html"><i
							class="fa fa-fw fa-dashboard"></i> Estimate</a></li>
					
					<li><a href="createInvoice.html"><i
							class="fa fa-fw fa-dashboard"></i> Invoice</a></li>
					
					<li><a href="Receipts.html"><i
							class="fa fa-fw fa-dashboard"></i> Receipts</a></li>
							
					<li><a href="Reports.html"><i
							class="fa fa-fw fa-dashboard"></i> Reports</a></li>
							
					<li><a href="createCustomer.html"><i
							class="fa fa-fw fa-dashboard"></i> Customers</a></li>
							
					<li><a href="createVendor.html"><i
							class="fa fa-fw fa-dashboard"></i> Vendors</a></li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </nav>

	<!-- EDIT TAX DETAILS DIALOG , associate every action in each row, with internal tax _id, so hat can be passed for ACTIONS-->


	<div id="edittax_dialog" title="Dialog Form" style="display: none;">
		<div id="form-panel">
			<form action="" method="post">

				<div class="form-group required">
                                <label class="col-md-3 control-label">Tax Name</label>
                                <div class="col-md-6"><input class="form-control" id="new_tax_name"  name="new_tax_name" maxlength="30"  placeholder="Tax Name" required="required" title="" type="text" />
                                </div>
                             </div>
                             
                             <br><br><br>
                             
                             <div class="form-group required">
                                <label class="col-md-3 control-label">Tax Abbreviation</label>
                                <div class="col-md-6"><input class="form-control" id="new_abbreviation" name="new_abbreviation" maxlength="100" required="required" title="" type="text" />
                                </div>
                             </div>
                             
                             <br><br>
                             
                             <div class="form-group required">
                                <label class="col-md-3 control-label">Tax Registration No</label>
                                <div class="col-md-6"><input class="form-control" id="new_tax_reg_no"  required="required" name="new_tax_reg_no" maxlength="100"  title="" type="number" />
                                </div>
                             </div>
                             
                             <br><br>
                             
                             <div class="form-group required">
                                <label class="col-md-3 control-label">Description</label>
                                <div class="col-md-6"><input class="form-control" id="new_desc"  name="new_desc" title=""  type="text" required="required" />
                                </div>
                             </div>
                           
                           <br><br>
                             
                             <div class="form-group required">
                                <label class="col-md-3 control-label">Tax Rate</label>
                                <div class="col-md-6"><input class="form-control" id="new_tax_rate" step="any"  name="new_tax_rate" required="required" title="" type="number" />
                                </div>
                             </div>
                             
                            
                             
                             <br><br>
                             
                             
                             <div class="form-group">
                                 <label class="col-md-3 control-label">Is this Tax recoverable? </label>
                                
                                <div class="col-md-1">
                               
                                        <input type="checkbox" value="" class="form-control" id="new_tax_recovery" name="new_tax_recovery">
                                       
                                   
                                </div>
                             </div>
                             

				<br> <br> <input id="submit" type="submit"
					value="Save" class="btn btn-default" onclick="return submit_edit_tax()">
				

					<input id="cancel" type="submit"
					value="Cancel" class="btn btn-default" onclick="return cancel()" formnovalidate>
					
			</form>
			
					
				
			
		</div>
	</div>


	<!-- END OF EDIT TAX DETAILS DIALOG -->




        <div id="page-wrapper">

            <div class="container-fluid">



 <h1 class="page-header">
                           Tax Settings
                        </h1>
                        
                     <!--     <div class="row">
                    <div class="col-lg-12">-->
                    
                    <!------CONTROL TABS START------>
						<ul class="nav nav-tabs bordered">
						
						<li class="active"><a href="#view_taxes" data-toggle="tab"><i
									class="entypo-menu"></i> View Tax</a></li>
									
							<li ><a href="#add_tax" data-toggle="tab"><i
									class="entypo-menu"></i> Add new tax</a></li>
									
							
							

						</ul>
						<!------CONTROL TABS END------>
                     
                      
                      <div class="tab-content">
                       <div class="tab-pane box" id="add_tax">  
                        <div id="form-panel">
                        <div class="row">
                        <div class="col-lg-8">
                        <form role="form" id="profile">
                        
                    
                            <!-- fill drop down based on documents/numbers provided to support tax type 
                            1. tin  - sales/cst
                            2. service tax reg no - service tax
                            3. gstn - cgst/igst/sgst
                            
                            
                            -->
                            <div class="form-group required">
                                <label class="col-md-3 control-label">Tax Name</label>
                               <div class="col-md-6">
								<select class="form-control" id="tax_name" required>
									<option value=''>Select</option>
									<option value="Sales Tax">Sales Tax</option>
									<option value="Service Tax">Service Tax</option>
									<option value="CST">CST</option>
									<option value="CGST">CGST</option>
									<option value="SGST">SGST</option>
									<option value="IGST">IGST</option>
								</select>
					           </div>
                                </div>
                            
                             
                             <br><br><br>
                             
                             <div class="form-group required">
                                <label class="col-md-3 control-label">Tax Abbreviation</label>
                                <div class="col-md-6"><input class="form-control" id="abbreviation" name="abbreviation" maxlength="100" required="required" title="" type="text" />
                                </div>
                             </div>
                             
                             <br><br>
                             <!--  
                             <div class="form-group required">
                                <label class="col-md-3 control-label">Tax Registration No</label>
                                <div class="col-md-6"><input class="form-control" id="tax_reg_no"  required="required" name="tax_reg_no" maxlength="100"  title="" type="number" />
                                </div>
                             </div>
                             -->
                             
                             
                             <div class="form-group required">
                                <label class="col-md-3 control-label">Description</label>
                                <div class="col-md-6"><input class="form-control" id="desc"  name="desc" title=""  type="text" required="required" />
                                </div>
                             </div>
                           
                           <br><br>
                             
                             <div class="form-group required">
                                <label class="col-md-3 control-label">Tax Rate</label>
                                <div class="col-md-6"><input class="form-control" id="taxrate" step="any"  name="tax_rate" required="required" title="" type="number" />
                                </div>
                             </div>
                             
                            
                             
                             <br><br>
                             
                             
                             <div class="form-group">
                                 <label class="col-md-3 control-label">Is this Tax recoverable? </label>
                                
                                <div class="col-md-1">
                               
                                        <input type="checkbox" value="" class="form-control" id="tax_recovery" >
                                       
                                   
                                </div>
                             </div>
                             
                             <br><br>
                              
                         </form>
                          
                           <input type="submit" class="btn btn-primary" id="submit_add_tax" onclick="return update()">  
                           
                        
                         </div>
                         </div>
                         </div>
                         </div>
                         
                      
                        
                        <!-- NEW NAV BAR CONTENT -->
                        <!--  ASSOCIATION ACTION BUTTON WITH ID SUCH THAT FOR EVERY ROW IT HOLDS TAX_ID, PASS THIS
                        TO DELETE AND EDIT FUNCTION, SO INTERNAL TAX_ID IS KNOWN -->
                        
                        <div class="tab-pane box active " id="view_taxes">
							<div class="row">
                        <div class="col-lg-12">
                        <br><br>
							<table class="table table-bordered datatable" id="table_export">
												<thead>
													<tr>

														<th><div>Tax Name</div></th>

														<th><div>Tax Abbreviation</div></th>
														<th><div>Tax Description</div></th>
														<th><div>Tax Rate</div></th>
														<th><div>Tax Recoverable?</div></th>
														<th><div>Options</div></th>
														
													</tr>
												</thead>
												<tbody>
													<tr>
														<td>
														<!--  ADD CODE TO POPULATE VALUES FROM JSON FOR EACH TD -->
															

														</td>

														<td>
															

														</td>
														<td>
															

														</td>
														<td>
															

														</td>
														<td>
															

														</td>
													
														
														
														<td> <!-- ACTIONS -->
                                 <div class="btn-group">
                                 
                                <button type="button" class="btn btn-default btn-sm dropdown-toggle" data-toggle="dropdown">
                                    Action <span class="caret"></span>
                                </button>
                                <ul class="dropdown-menu dropdown-default pull-right" role="menu">
                                    
                                    <!-- EDITING LINK -->
                                    <li>
                                        <a href="" onClick="return edit_tax()">    <!-- OPEN POP UP WITH FILLED VALUES, pass  table tax_id -->
                                            <i class="entypo-pencil"></i>
                                                Edit Tax
                                            </a>
                                    </li>
                                    <li class="divider"></li>
                                    
                                    <!-- DELETION LINK -->   <!-- DELETE FROM DATABASE -->
                                    <li>
                                        <a href="" onClick="return confirm('Are you sure to delete?')">
                                            <i class="entypo-trash"></i>
                                                Delete Tax
                                            </a>
                                    </li>
                                </ul>
                            </div>

                            </td>
														
													</tr>

												</tbody>
											</table>
											</div>
											</div>
							
							
							</div>
                        
                        
                        
                        
                        </div> <!-- end of nav bar content -->
                        
                      
                  <!--   </div>
                </div> -->
                <!-- /.row -->
</div> <!--  wrapper -->

               
              
            </div>
            <!-- /.container-fluid -->

        </div>
        <!-- /#page-wrapper -->

    </div>
    <!-- /#wrapper -->

</body>

<script>
 function confirm_delete() {
  return confirm('Are you sure to delete?');
  //add ajax code to delete the same
  //receive internal tax_id as parameter
}
  
function add_tax()
{

var tax_name = $('#tax_name').val();
var tax_abbr = $('#abbreviation').val();
var tax_rate = $('#tax_rate').val();
var tax_desc = $('#desc').val();
var tax_regno = $('#tax_reg_no').val();
//var tax_recovery  = $('#tax_recovery').prop("checked");

if(tax_name==''||tax_abbr==''||tax_rate==''||tax_desc==''||tax_regno=='')
{
return true;
}

//alert("all fine");
//add code to add tax into table
//upon success return false else return message


update();


}
</script>


<script>


function update()
{
	var tax ={}; 
	tax.tax_name = $("#tax_name").val();
	tax.tax_abbreviation = $("#abbreviation").val();
	tax.tax_desc = $("#desc").val();
	tax.tax_rate = Number($("#taxrate").val());
	tax.tax_recoverable = $('#tax_recovery').prop("checked");
	tax.tax_id= null;
	tax.company_id = "CMP100";
	var p = JSON.stringify(tax);
	//alert(p);
	console.log(p);


	$.ajax({
		   type : 'GET',
		   url  : '/Accounting/settings/tax/create_tax',
		    dataType :'json',
		    data:{'json' : p},
		    success: function(response) {
		     alert(response);
		     console.log( response);
		     return true;  //stay in same page
		    },
			error: function (a,b,c)
			{ 
				alert(a.status+b+c);
				return true;
			}  
			  });
	
	}



</script>


<!-----  DATA TABLE EXPORT CONFIGURATIONS
if two tables needed in same page for export this code is needed ---->   
                   
<script type="text/javascript">

	jQuery(document).ready(function($)
	{
		

		$('.nav-tabs a[data-toggle="tab"]').on('shown.bs.tab', function(e) {
	
	var jqTable = $('table.datatable', $(e.target).attr("href"));
	    if ( jqTable.length > 0 ) {
	    var oTableTools = TableTools.fnGetInstance( jqTable[0] );
	    if ( oTableTools != null && oTableTools.fnResizeRequired() ){
	        jqTable.dataTable().fnAdjustColumnSizing();
	        oTableTools.fnResizeButtons();
	    }
	}	
	
	return false;
});


		var datatable = $("#table_export").dataTable({
			"sPaginationType": "bootstrap",
			"sDom": "<'row'<'col-xs-3 col-left'l><'col-xs-9 col-right'<'export-data'T>f>r>t<'row'<'col-xs-3 col-left'i><'col-xs-9 col-right'p>>",
			
			"oTableTools": {
			    
			   
			
				"aButtons": [
					
					{
						"sExtends": "xls",
						
						
					},
					{
						"sExtends": "pdf",
						
					},
					{
						"sExtends": "print",
						"fnSetText"	   : "Press 'esc' to return",
						"fnClick": function (nButton, oConfig) {
							datatable.fnSetColumnVis(0, false);
							datatable.fnSetColumnVis(3, false);
							
							this.fnPrint( true, oConfig );
							
							window.print();
							
							$(window).keyup(function(e) {
								  if (e.which == 27) {
									  datatable.fnSetColumnVis(0, true);
									  datatable.fnSetColumnVis(3, true);
								  }
							});
						},
						
					},
				]
			},
			
		});
		
		$(".dataTables_wrapper select").select2({
			minimumResultsForSearch: -1
		});
	});
		
</script>

  

</html>
